/* Developer: Zohaib Kambrani (a2zzuhaib@gmai.com) */

package com.edfapg.sdk.views.edfacardpay.creditcardview.models

/**
 * Credit Card's brands
 */
enum class Brand {
    MADA("^(588845|440647|44079x5|446404|457865|968208|588846|493428|539931|558848|557606|968210|636120|417633|468540|468541|468542|468543|968201|446393|588847|400861|409201|458456|484783|968205|462220|455708|588848|455036|968203|486094|486095|486096|504300|440533|489317|489318|489319|445564|968211|401757|410685|432328|428671|428672|428673|968206|446672|543357|434107|431361|604906|521076|588850|968202|535825|529415|543085|524130|554180|549760|588849|968209|524514|529741|537767|535989|536023|513213|585265|588983|588982|589005|508160|531095|530906|532013|588851|605141|968204|422817|422818|422819|428331|483010|483011|483012|589206|968207|419593|439954|407197|407395|520058|530060|531196|412565|506968)[0-9]{0,10}$"),
    VISA("^4[0-9]{6,}$"),
    MASTERCARD("^5[1-5][0-9]{4,}$"),
    AMEX("^3[47][0-9]{5,}$"),
    DINERS("^3(?:0[0-5]|[68][0-9])[0-9]{4,}$"),
    DISCOVER("^6(?:011|5[0-9]{2})[0-9]{3,}$"),
    GENERIC,
    JCB("^(?:2131|1800|35[0-9]{3})[0-9]{3,}$"),
    MAESTRO("^(?:5[0678]\\\\d\\\\d|6304|6390|67\\\\d\\\\d)\\\\d{8,15}$"),
    UNIONPAY("^62[0-5]\\\\d{13,16}");

    private val regex: Regex?

    constructor() {
        this.regex = null
    }

    constructor(regex: String) {
        this.regex = regex.toRegex()
    }

    companion object {
        /**
         * Returns the brand of the given card's number
         */
        @JvmStatic
        fun parse(number: String): Brand {
            for (b in values()) {
                b.regex?.let {
                    if (it.matches(number)) {
                        return b
                    }
                }
            }

            return GENERIC
        }
    }
}